<!DOCTYPE html>
<html>
  <head>
	<title><%= title %></title>
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel='stylesheet' href='/stylesheets/style.css' />

  </head>
  <body>
	<h1>Rules:</h1>

	<script>
		var allRules = <%- rules %>;
	</script>
	<ol class="rules">
		<% myrules = JSON.parse(rules); %>
		<% for(var i = 0; i < myrules.length; i++) { %>
			<li class="rule" data-id="<%= myrules[i].id %>">
				<div class="if" data-id="<%= myrules[i].antecedent.id %>">
					<!--<span class="if_text">IF</span>-->
					<div class="vac if_descr">
						<div><%= myrules[i].description %></div>
					</div>
				</div>
				<div class="then" data-id="<%= myrules[i].consequent.id %>">
					<ul class="shots">
						<% for(var j = 0; j < myrules[i].consequent.subRules.length; j++) { %>
							<li class="vac shot" data-id="<%= myrules[i].consequent.subRules[j].id %>">
								<div><%= myrules[i].consequent.subRules[j].description %></div>
								<a class="removeButton"><span class="glyphicon glyphicon-remove"></span></a>
								<div class="timing">
									<a class="minButton"><span class="glyphicon glyphicon-minus"></span></a>
									<span class="glyphicon glyphicon-time"></span>
									<input type="text" value="<%= myrules[i].timing %>">
									<a class="plButton"><span class="glyphicon glyphicon-plus"></span></a>
								</div>
							</li>
						<% } %>
					</ul>
					<div id="plus_<%= i %>" class="plusButton"><span class="glyphicon glyphicon-plus"></span></div>
					<div class="randomness">
						<span class="glyphicon glyphicon-random"></span>
						<input type="text" value="<%= myrules[i].randomness %>">
						<div class="randomSlider" data-start="<%= myrules[i].randomness %>"></div>
					</div>
				</div>
				<div class="options" >
					<% for(var j = 0; j < myrules[i].consequent.options.length; j++) { %>
					<div class="vac option" data-j="<%= j %>">
						<div><%= myrules[i].consequent.options[j].description %></div>
					</div>
					<% } %>
				</div>
			</li>


		<% } %>
	</ol>

	<div class="syncButton"><div class="buttonLabel">Sync Server</div><span class="glyphicon glyphicon-refresh"></span></div>


	<script src="vendor/fastclick.js"></script>
	<script src="vendor/jquery-1.11.0.min.js"></script>
	<script src="vendor/jquery-sortable-min.js"></script>
	<script src="vendor/jquery.nouislider.min.js"></script>
	<link rel='stylesheet' href='vendor/jquery.nouislider.css' />
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="vendor/gsap/TweenLite.min.js"></script>
	<script src="vendor/gsap/easing/EasePack.min.js"></script>
	<script src="vendor/gsap/jquery.gsap.min.js"></script>
	<script src="vendor/gsap/plugins/CSSPlugin.min.js"></script>


	<script src="javascripts/main.js"></script>
  </body>
</html>
